<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Viewer for Notion</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    
<style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
    
    #main-viewer {
        width: 100%; height: 100%;
    }

    /* 하단 슬라이더 컨테이너 */
    .controls-container {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        max-width: 500px;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    /* 슬라이더 디자인 */
    #anim-slider {
        -webkit-appearance: none;
        width: 100%;
        height: 6px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        outline: none;
    }

    #anim-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: #007acc; /* 포인트 컬러 */
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .time-label {
        color: white;
        font-family: sans-serif;
        font-size: 12px;
        text-shadow: 0 1px 3px rgba(0,0,0,0.8);
    }
</style>
</head>

<body>
    <model-viewer 
        id="main-viewer"
        src="anim-ais_pod.glb"
        camera-controls 
        enable-pan
        bounds="tight"

        /* --- 애니메이션 필수 속성 --- */
        autoplay                /* 자동 재생 */
        animation-name="M-4Action" /* 특정 애니메이션 이름 (선택 사항) */
        animation-crossfade-duration="0.3" /* 애니메이션 전환 시 부드럽게 */
        
        shadow-intensity="1" 
        camera-orbit="-90deg 75deg 120%"
        alt="Blender 3D Model">
    </model-viewer>

    <div class="controls-container">
        <div class="time-label" id="time-display">0:00 / 0:00</div>
        <input type="range" id="anim-slider" min="0" max="100" value="0">
    </div>

    <script>
        const viewer = document.querySelector('#main-viewer');
        const slider = document.querySelector('#anim-slider');
        const timeDisplay = document.querySelector('#time-display');

        viewer.addEventListener('load', () => {
            viewer.pause(); // 자동 재생 중지
            const duration = viewer.duration; // 애니메이션 전체 시간 (초)

            // 슬라이더 조작 시 애니메이션 프레임 이동
            slider.addEventListener('input', () => {
                const val = slider.value; // 0 ~ 100
                const seekTime = (val / 100) * duration;
                viewer.currentTime = seekTime;
                
                // 시간 표시 업데이트
                updateTimeLabel(seekTime, duration);
            });

            function updateTimeLabel(current, total) {
                timeDisplay.innerText = `${current.toFixed(2)}s / ${total.toFixed(2)}s`;
            }
            
            // 초기 시간 표시
            updateTimeLabel(0, duration);
        });
    </script>

</body>

</html>